import{p as ye,f as C,e as le,a as T,s as ke}from"../chunks/B3wk3v6i.js";import{w as b,b as xe,y as p,ar as Me,as as Ee,m as n,p as te,i as Ve,c as w,t as K,a as se,s as v,aq as Z,r as D,v as pe,f as X,a5 as we,a6 as De}from"../chunks/BOs4Ln1W.js";import{a as Se,s as O,c as ze,b as Y,h as Pe}from"../chunks/C__GEJOS.js";import{p as l,b as $,i as B,r as ve,s as Ae}from"../chunks/y0x0yPzR.js";import{e as Ie,i as Te,V as ue}from"../chunks/CN__6kTZ.js";import{a as Ce,b as Fe,d as He,l as qe,G as P,r as Le,u as Ne,I as q,e as Ge,g as Re}from"../chunks/z7ChdQ07.js";import{H as J}from"../chunks/DNBLGgO0.js";class Oe extends Ce{setValue;getValue;min;max;step;constructor(e,t,s,o,i,m,c,y=!1,f,x,M,E=!1){super(e,c,y,f,x,M,E),this.setValue=t,this.getValue=s,this.min=o,this.max=i,this.step=m}onbuttonpressed(e,t){if(this.disabled||!Fe(this.input,e))return!1;const s=this.input;return s.buttons.includes(t)?super.onbuttonpressed(e,t):(s.buttons_pos.includes(t)&&this.setValue(Math.min(this.max,this.getValue()+this.step)),s.buttons_neg.includes(t)&&this.setValue(Math.max(this.min,this.getValue()-this.step)),!1)}thisKey(e){return this.input.keys.includes(e.key.toLowerCase())||!1}onkeyhold(e){const t=this.input,s=e.key.toLowerCase();super.onkeyhold(e),t.keys_pos.includes(s)&&this.setValue(Math.min(this.max,this.getValue()+this.step)),t.keys_neg.includes(s)&&this.setValue(Math.max(this.min,this.getValue()-this.step))}}function de(a){return Object.prototype.toString.call(a)==="[object Date]"}function ee(a,e,t,s){if(typeof t=="number"||de(t)){const o=s-t,i=(t-e)/(a.dt||1/60),m=a.opts.stiffness*o,c=a.opts.damping*i,y=(m-c)*a.inv_mass,f=(i+y)*a.dt;return Math.abs(f)<a.opts.precision&&Math.abs(o)<a.opts.precision?s:(a.settled=!1,de(t)?new Date(t.getTime()+f):t+f)}else{if(Array.isArray(t))return t.map((o,i)=>ee(a,e[i],t[i],s[i]));if(typeof t=="object"){const o={};for(const i in t)o[i]=ee(a,e[i],t[i],s[i]);return o}else throw new Error(`Cannot spring ${typeof t} values`)}}class ie{#i=b(.15);#n=b(.8);#r=b(.01);#e;#s;#a=void 0;#l=0;#o=1;#d=0;#t=null;#u=null;constructor(e,t={}){this.#e=b(e),this.#s=b(e),typeof t.stiffness=="number"&&(this.#i.v=j(t.stiffness,0,1)),typeof t.damping=="number"&&(this.#n.v=j(t.damping,0,1)),typeof t.precision=="number"&&(this.#r.v=t.precision)}static of(e,t){const s=new ie(e(),t);return xe(()=>{s.set(e())}),s}#p(e){if(p(this.#s,e),this.#e.v??=e,this.#a??=this.#e.v,!this.#t){this.#l=He.now();var t=1e3/(this.#d*60);this.#t??=qe(s=>{this.#o=Math.min(this.#o+t,1);const o=Math.min(s-this.#l,1e3/30),i={inv_mass:this.#o,opts:{stiffness:this.#i.v,damping:this.#n.v,precision:this.#r.v},settled:!0,dt:o*60/1e3};var m=ee(i,this.#a,this.#e.v,this.#s.v);return this.#a=this.#e.v,this.#l=s,p(this.#e,m),i.settled&&(this.#t=null),!i.settled})}return this.#t.promise}set(e,t){if(this.#u?.reject(new Error("Aborted")),t?.instant||this.#e.v===void 0)return this.#t?.abort(),this.#t=null,p(this.#e,p(this.#s,e)),this.#a=e,Promise.resolve();t?.preserveMomentum&&(this.#o=0,this.#d=t.preserveMomentum);var s=this.#u=Me();return s.promise.catch(Ee),this.#p(e).then(()=>{s===this.#u&&s.resolve(void 0)}),s.promise}get current(){return n(this.#e)}get damping(){return n(this.#n)}set damping(e){p(this.#n,j(e,0,1))}get precision(){return n(this.#r)}set precision(e){p(this.#r,e)}get stiffness(){return n(this.#i)}set stiffness(e){p(this.#i,j(e,0,1))}get target(){return n(this.#s)}set target(e){this.set(e)}}function j(a,e,t){return Math.max(e,Math.min(t,a))}var je=C("<div></div>"),Be=C('<div><span class="value-text svelte-k048mk"> </span></div>'),Ue=C('<div role="group"><input/> <div class="track-layer svelte-k048mk"><div class="track active svelte-k048mk"></div> <div class="track background svelte-k048mk"></div> <!> <div><!></div></div></div>');function We(a,e){const t=ye();te(e,!0);let s=l(e,"value",15,0),o=l(e,"min",3,0),i=l(e,"max",3,100),m=l(e,"step",3,1),c=l(e,"disabled",3,!1),y=l(e,"showValue",3,!0),f=l(e,"size",3,"s"),x=l(e,"stops",3,!1),M=l(e,"endStop",3,!0),E=l(e,"vertical",3,!1),A=l(e,"inputElement",15),F=l(e,"element",15),H=l(e,"format",3,d=>d.toFixed(0)),r=ve(e,["$$slots","$$events","$$legacy","value","min","max","step","disabled","showValue","size","stops","endStop","vertical","inputElement","element","label","title","format"]),u=b(!1),h=b(!1);const S=new ie(s(),{stiffness:.2,damping:.8});Ve(()=>{S.target=s()});const I=Z(()=>i()-o()),g=Z(()=>(S.current-o())/n(I)),L=Z(()=>{if(!x()&&!M())return[];const d=[],V=typeof m()=="number"?m():n(I)/10;if(x())for(let _=0;_<=n(I);_+=V){const z=_/n(I);if(z<0||z>1)return;d.push(z)}return M()&&(d.some(_=>Math.abs(_-1)<.001)||d.push(1)),d});function N(d){s(Number(d.currentTarget.value))}var k=Ue();let G,ne;var U=w(k),me=()=>p(u,!0),he=()=>p(u,!1),ce=()=>p(u,!1),fe=()=>p(u,!1);Se(U,()=>({...r,type:"range",min:o(),max:i(),step:m(),disabled:c(),value:s(),oninput:N,"aria-describedby":e.title?t:r["aria-describedby"],"aria-label":e.label||e.title||r["aria-label"],class:"np-input",onpointerdown:me,onpointerup:he,onpointercancel:ce,onblur:fe}),void 0,void 0,void 0,"svelte-k048mk",!0),$(U,d=>A(d),()=>A());var re=v(U,2),ae=v(w(re),4);Ie(ae,17,()=>n(L),Te,(d,V)=>{var _=je();let z,R;K(()=>{z=O(_,1,"stop svelte-k048mk",null,z,{filled:n(V)<=n(g)}),R=Y(_,"",R,{left:E()?void 0:`${n(V)*100}%`,bottom:E()?`${n(V)*100}%`:void 0})}),T(d,_)});var W=v(ae,2);let oe;var ge=w(W);{var _e=d=>{var V=Be();let _;var z=w(V),R=w(z,!0);D(z),D(V),K(be=>{_=O(V,1,"value-indicator svelte-k048mk",null,_,{visible:n(u)||n(h)}),ke(R,be)},[()=>H()(s())]),T(d,V)};B(ge,d=>{y()&&d(_e)})}D(W),D(re),D(k),$(k,d=>F(d),()=>F()),K(()=>{G=O(k,1,ze(["np-slider-container",f(),E()?"vertical":"horizontal",e.class]),"svelte-k048mk",G,{disabled:c()}),ne=Y(k,"",ne,{"--np-slider-progress":n(g)}),oe=O(W,1,"handle svelte-k048mk",null,oe,{interacting:n(u)})}),le("mouseenter",k,()=>p(h,!0)),le("mouseleave",k,()=>p(h,!1)),T(a,k),se()}var Ke=C('<div class="slider svelte-1r0ty6r"><div class="vslider svelte-1r0ty6r"><!></div></div>'),Ze=C('<div class="slider svelte-1r0ty6r"><div class="hslider svelte-1r0ty6r"><!></div></div>'),Je=C('<div class="slider svelte-1r0ty6r"><!></div> <!>',1),Qe=C("<!> <!> <!>",1);function Q(a,e){te(e,!0);let t=l(e,"inputMapping",19,()=>({name:"Slider",gamepad:-1,sensitivity:.05,axes:0,buttons:[P.DOWN],buttons_neg:[P.DPAD_LEFT],buttons_pos:[P.DPAD_RIGHT],keys_pos:["d"],keys_neg:["a"],keys:["e","enter"],invert:!1})),s=l(e,"context",19,()=>["default"]),o=l(e,"requiresFocus",3,!0),i=l(e,"value",15,0),m=l(e,"inputElement",15),c=l(e,"addHints",3,!0),y=ve(e,["$$slots","$$events","$$legacy","inputMapping","context","requiresFocus","value","inputElement","addHints"]),f=b(void 0);pe(()=>{const r=new Oe(t(),u=>{i(u)},()=>i(),e.min||0,e.max||100,e.step||1,m(),o(),e.onpressed);return Le(s(),r),()=>{Ne(s(),r)}});var x=Qe(),M=X(x);{var E=r=>{var u=Ke(),h=w(u);Y(h,"",{},{"z-index":"2"});var S=w(h);J(S,{text:"",get context(){return s()},get keys(){return t().keys_pos},get buttons(){return t().buttons_pos},style:"position: relative; top: 0px; right: -10px;"}),D(h),D(u),T(r,u)};B(M,r=>{c()&&e.vertical&&r(E)})}var A=v(M,2);$(We(A,Ae(()=>y,{get inputElement(){return m()},set inputElement(r){m(r)},get value(){return i()},set value(r){i(r)}})),r=>p(f,r,!0),()=>n(f));var F=v(A,2);{var H=r=>{var u=Je(),h=X(u),S=w(h);J(S,{text:"",get context(){return s()},get keys(){return t().keys_neg},get buttons(){return t().buttons_neg},style:"position: absolute; top: 0px; left: 20px;"}),D(h);var I=v(h,2);{var g=L=>{var N=Ze(),k=w(N),G=w(k);J(G,{text:"",get context(){return s()},get keys(){return t().keys_pos},get buttons(){return t().buttons_pos},style:"position: relative; top: 0px; right: -10px;"}),D(k),D(N),T(L,N)};B(I,L=>{e.vertical||L(g)})}T(r,u)};B(F,r=>{c()&&r(H)})}T(a,x),se()}var Xe=C("<h1>Slider</h1> use the bumper (<!>/<!>) or the keyboard buttons (<!>/<!>) to switch between the Slider components, use <!> (d-pad horizontal) to move the slider by its step value. <!><br/> <!> <br/> This one is vertical, so we change to <!> (d-pad vertical) <!> <!> <!>",1);function rt(a,e){te(e,!0);let t=b(50),s=b(40),o=b(30),i=b(void 0);const m={name:"horizontal_slider_input",gamepad:-1,axes:0,sensitivity:0,buttons_pos:[P.DPAD_UP],buttons_neg:[P.DPAD_DOWN],keys_pos:["w"],keys_neg:["s"],buttons:[],keys:[],invert:!1},c={name:"Focus next",gamepad:-1,buttons:[P.BUMPER_RIGHT],keys:["e"]},y={name:"Focus previous",gamepad:-1,buttons:[P.BUMPER_LEFT],keys:["q"]};pe(()=>{n(i)&&n(i).focus()});var f=Xe();Pe("71qqbz",g=>{we(()=>{De.title="Slider - Noph UI Gamepad Components"})});var x=v(X(f),2);q(x,{type:"ps4",get input(){return c.buttons[0]}});var M=v(x,2);q(M,{type:"ps4",get input(){return y.buttons[0]}});var E=v(M,2);q(E,{type:"keyboard_mouse",get input(){return c.keys[0]}});var A=v(E,2);q(A,{type:"keyboard_mouse",get input(){return y.keys[0]}});var F=v(A,2);q(F,{type:"ps4",get input(){return P.DPAD_HORIZONTAL}});var H=v(F,2);Q(H,{size:"m",get value(){return n(t)},set value(g){p(t,g,!0)},get inputElement(){return n(i)},set inputElement(g){p(i,g,!0)}});var r=v(H,3);Q(r,{step:5,stops:!0,size:"m",get value(){return n(s)},set value(g){p(s,g,!0)}});var u=v(r,4);q(u,{type:"ps4",get input(){return P.DPAD_VERTICAL}});var h=v(u,2);Q(h,{step:10,stops:!0,size:"m",vertical:!0,get inputMapping(){return m},get value(){return n(o)},set value(g){p(o,g,!0)}});var S=v(h,2);ue(S,{onpressed:()=>{Ge()},get inputMapping(){return c}});var I=v(S,2);ue(I,{onpressed:()=>{Re()},get inputMapping(){return y}}),T(a,f),se()}export{rt as component};
