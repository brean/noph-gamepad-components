import{a as te,f as ne}from"./Bgz2G3Qe.js";import{p as re,v as oe,y as t,a as ie,E as d,F as r}from"./rlaaCJwg.js";import{a as se}from"./59hxqqp_.js";import{p as G,b as ae,r as ce}from"./B-uOi9va.js";var le=ne("<div></div>");function pe(b,c){re(c,!0);let H=G(c,"forceHover",3,!1),s=G(c,"element",15),F=ce(c,["$$slots","$$events","$$legacy","forceHover","element","forElement"]),v=d(!1),T=d(!1);const B=450,P=225,U=.2,Y=10,z=75,W=.35,k="::after",K="forwards",V="cubic-bezier(0.2, 0, 0, 1)",X=150;let u=d(""),N=d(""),f=d(0),h=d(void 0),a=d("INACTIVE"),m=d(void 0),C=d(!1);const L=e=>e.pointerType==="touch",p=e=>{if(!e.isPrimary||t(m)&&t(m).pointerId!==e.pointerId)return!1;if(e.type==="pointerenter"||e.type==="pointerleave")return!L(e);const n=e.buttons===1;return L(e)||n},q=()=>{const{height:e,width:n}=s().parentElement.getBoundingClientRect(),o=Math.max(e,n),l=Math.max(W*o,z);r(f,Math.floor(o*U),!0);const I=Math.sqrt(n**2+e**2)+Y;r(N,`${(I+l)/t(f)}`),r(u,`${t(f)}px`)},Z=e=>{const{scrollX:n,scrollY:o}=window,{left:l,top:i}=s().parentElement.getBoundingClientRect(),I=n+l,Q=o+i,{pageX:$,pageY:ee}=e;return{x:$-I,y:ee-Q}},j=e=>{const{height:n,width:o}=s().parentElement.getBoundingClientRect(),l={x:(o-t(f))/2,y:(n-t(f))/2};let i;return e instanceof PointerEvent?i=Z(e):i={x:o/2,y:n/2},i={x:i.x-t(f)/2,y:i.y-t(f)/2},{startPoint:i,endPoint:l}},_=e=>{if(!s())return;r(v,!0),t(h)?.cancel(),q();const{startPoint:n,endPoint:o}=j(e),l=`${n.x}px, ${n.y}px`,i=`${o.x}px, ${o.y}px`;r(h,s().animate({top:[0,0],left:[0,0],height:[t(u),t(u)],width:[t(u),t(u)],transform:[`translate(${l}) scale(1)`,`translate(${i}) scale(${t(N)})`]},{pseudoElement:k,duration:B,easing:V,fill:K}),!0)},E=async()=>{r(m,void 0),r(a,"INACTIVE");const e=t(h);let n=1/0;if(typeof e?.currentTime=="number"?n=e.currentTime:e?.currentTime&&(n=e.currentTime.to("ms").value),n>=P){r(v,!1);return}await new Promise(o=>{setTimeout(o,P-n)}),t(h)===e&&r(v,!1)},J=({x:e,y:n})=>{const{top:o,left:l,bottom:i,right:I}=s().parentElement.getBoundingClientRect();return e>=l&&e<=I&&n>=o&&n<=i},g=e=>{p(e)&&r(T,!0)},y=e=>{p(e)&&(r(T,!1),t(a)!=="INACTIVE"&&E())},R=e=>{if(p(e)){if(t(a)==="HOLDING"){r(a,"WAITING_FOR_CLICK");return}if(t(a)==="TOUCH_DELAY"){r(a,"WAITING_FOR_CLICK"),_(t(m));return}}},x=async e=>{if(p(e)){if(r(m,e,!0),!L(e)){r(a,"WAITING_FOR_CLICK"),_(e);return}t(C)&&!J(e)||(r(C,!1),r(a,"TOUCH_DELAY"),await new Promise(n=>{setTimeout(n,X)}),t(a)==="TOUCH_DELAY"&&(r(a,"HOLDING"),_(e)))}},O=()=>{if(t(a)==="WAITING_FOR_CLICK"){E();return}t(a)==="INACTIVE"&&(_(),E())},w=e=>{p(e)&&E()},M=()=>{r(C,!0),E()},A=e=>{e.removeEventListener("click",O),e.removeEventListener("contextmenu",M),e.removeEventListener("pointercancel",w),e.removeEventListener("pointerdown",x),e.removeEventListener("pointerenter",g),e.removeEventListener("pointerleave",y),e.removeEventListener("pointerup",R)},D=e=>{A(e),e.addEventListener("click",O),e.addEventListener("contextmenu",M),e.addEventListener("pointercancel",w),e.addEventListener("pointerdown",x),e.addEventListener("pointerenter",g),e.addEventListener("pointerleave",y),e.addEventListener("pointerup",R)};oe(()=>{const e=window?.matchMedia("(forced-colors: active)");return!e.matches&&c.forElement?D(c.forElement):!e.matches&&s()&&D(s()),()=>{c.forElement&&A(c.forElement),s()&&A(s())}});var S=le();se(S,()=>({"aria-hidden":"true",...F,class:[t(v)&&"np-ripple-pressed",(t(T)||H())&&"np-ripple-hovered","np-ripple-surface",c.class]}),void 0,void 0,void 0,"svelte-l2lhy4"),ae(S,e=>s(e),()=>s()),te(b,S),ie()}export{pe as R};
