import{z as y,h as M,A as j,m as Y,B as $,C as ee,H as ne,D as q,d as k,E as B,F as O,G as re,I as ae,J as U,K as fe,L as F,M as E,N as z,O as ie,P as W,Q as le,R as G,S as ue,T as se,U as oe,V as te,W as J,X as K,Y as V,Z as de,_ as ve,$ as pe,a0 as ce,g as he,a1 as ge,a2 as P,a3 as _e,p as me,v as Ee,a as Ce}from"./BOs4Ln1W.js";import"./B3wk3v6i.js";import{p as H}from"./y0x0yPzR.js";import{G as Te,r as Ae,u as Ie}from"./z7ChdQ07.js";import{B as we}from"./BDgsntBq.js";function Oe(e,r){return r}function Ne(e,r,l){for(var t=[],h=r.length,s,u=r.length,d=0;d<h;d++){let _=r[d];K(_,()=>{if(s){if(s.pending.delete(_),s.done.add(_),s.pending.size===0){var o=e.outrogroups;L(G(s.done)),o.delete(s),o.size===0&&(e.outrogroups=null)}}else u-=1},!1)}if(u===0){var a=t.length===0&&l!==null;if(a){var v=l,f=v.parentNode;pe(f),f.append(v),e.items.clear()}L(r,!a)}else s={pending:new Set(r),done:new Set},(e.outrogroups??=new Set).add(s)}function L(e,r=!0){for(var l=0;l<e.length;l++)ce(e[l],r)}var X;function ke(e,r,l,t,h,s=null){var u=e,d=new Map,a=(r&P)!==0;if(a){var v=e;u=M?k(he(v)):v.appendChild(F())}M&&j();var f=null,_=$(()=>{var i=l();return ue(i)?i:i==null?[]:G(i)}),o,c=!0;function T(){n.fallback=f,Se(n,o,u,r,t),f!==null&&(o.length===0?(f.f&E)===0?J(f):(f.f^=E,D(f,null,u)):K(f,()=>{f=null}))}var w=y(()=>{o=Y(_);var i=o.length;let N=!1;if(M){var S=ee(u)===ne;S!==(i===0)&&(u=q(),k(u),B(!1),N=!0)}for(var m=new Set,A=fe,b=ie(),g=0;g<i;g+=1){M&&O.nodeType===re&&O.data===ae&&(u=O,N=!0,B(!1));var I=o[g],x=t(I,g),p=c?null:d.get(x);p?(p.v&&U(p.v,I),p.i&&U(p.i,g),b&&A.skipped_effects.delete(p.e)):(p=be(d,c?u:X??=F(),I,x,g,h,r,l),c||(p.e.f|=E),d.set(x,p)),m.add(x)}if(i===0&&s&&!f&&(c?f=z(()=>s(u)):(f=z(()=>s(X??=F())),f.f|=E)),M&&i>0&&k(q()),!c)if(b){for(const[Q,Z]of d)m.has(Q)||A.skipped_effects.add(Z.e);A.oncommit(T),A.ondiscard(()=>{})}else T();N&&B(!0),Y(_)}),n={effect:w,items:d,outrogroups:null,fallback:f};c=!1,M&&(u=O)}function R(e){for(;e!==null&&(e.f&ve)===0;)e=e.next;return e}function Se(e,r,l,t,h){var s=(t&_e)!==0,u=r.length,d=e.items,a=R(e.effect.first),v,f=null,_,o=[],c=[],T,w,n,i;if(s)for(i=0;i<u;i+=1)T=r[i],w=h(T,i),n=d.get(w).e,(n.f&E)===0&&(n.nodes?.a?.measure(),(_??=new Set).add(n));for(i=0;i<u;i+=1){if(T=r[i],w=h(T,i),n=d.get(w).e,e.outrogroups!==null)for(const p of e.outrogroups)p.pending.delete(n),p.done.delete(n);if((n.f&E)!==0)if(n.f^=E,n===a)D(n,null,l);else{var N=f?f.next:a;n===e.effect.last&&(e.effect.last=n.prev),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),C(e,f,n),C(e,n,N),D(n,N,l),f=n,o=[],c=[],a=R(f.next);continue}if((n.f&V)!==0&&(J(n),s&&(n.nodes?.a?.unfix(),(_??=new Set).delete(n))),n!==a){if(v!==void 0&&v.has(n)){if(o.length<c.length){var S=c[0],m;f=S.prev;var A=o[0],b=o[o.length-1];for(m=0;m<o.length;m+=1)D(o[m],S,l);for(m=0;m<c.length;m+=1)v.delete(c[m]);C(e,A.prev,b.next),C(e,f,A),C(e,b,S),a=S,f=b,i-=1,o=[],c=[]}else v.delete(n),D(n,a,l),C(e,n.prev,n.next),C(e,n,f===null?e.effect.first:f.next),C(e,f,n),f=n;continue}for(o=[],c=[];a!==null&&a!==n;)(v??=new Set).add(a),c.push(a),a=R(a.next);if(a===null)continue}(n.f&E)===0&&o.push(n),f=n,a=R(n.next)}if(e.outrogroups!==null){for(const p of e.outrogroups)p.pending.size===0&&(L(G(p.done)),e.outrogroups?.delete(p));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||v!==void 0){var g=[];if(v!==void 0)for(n of v)(n.f&V)===0&&g.push(n);for(;a!==null;)(a.f&V)===0&&a!==e.fallback&&g.push(a),a=R(a.next);var I=g.length;if(I>0){var x=(t&P)!==0&&u===0?l:null;if(s){for(i=0;i<I;i+=1)g[i].nodes?.a?.measure();for(i=0;i<I;i+=1)g[i].nodes?.a?.fix()}Ne(e,g,x)}}s&&ge(()=>{if(_!==void 0)for(n of _)n.nodes?.a?.apply()})}function be(e,r,l,t,h,s,u,d){var a=(u&se)!==0?(u&oe)===0?le(l,!1,!1):W(l):null,v=(u&te)!==0?W(h):null;return{v:a,i:v,e:z(()=>(s(r,a??l,v??h,d),()=>{e.delete(t)}))}}function D(e,r,l){if(e.nodes)for(var t=e.nodes.start,h=e.nodes.end,s=r&&(r.f&E)===0?r.nodes.start:l;t!==null;){var u=de(t);if(s.before(t),t===h)return;t=u}}function C(e,r,l){r===null?e.effect.first=l:r.next=l,l===null?e.effect.last=r:l.prev=r}function Be(e,r){me(r,!0);let l=H(r,"disabled",3,!1),t=H(r,"onpressed",3,void 0),h=H(r,"onhold",3,void 0),s=H(r,"onrelease",3,void 0),u=H(r,"inputMapping",19,()=>({name:"Help",gamepad:-1,buttons:[Te.VIEW],keys:["h"]})),d=H(r,"context",19,()=>["default"]);Ee(()=>{const a=new we(u(),void 0,!1,t(),h(),s());return a.disabled=l(),Ae(d(),a),()=>{a&&Ie(d(),a)}}),Ce()}export{Be as V,ke as e,Oe as i};
